<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Ekspor 101</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Link to your custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="flex flex-col h-screen antialiased">

    <!-- Tampilan ID Pengguna (untuk debugging/identifikasi) -->
    <div id="userIdDisplay" class="bg-blue-600 text-white p-3 text-center text-sm font-medium rounded-b-lg shadow-md hidden">
        ID Pengguna Anda: <span id="currentUserId">Memuat...</span>
        <button id="logoutBtn" class="ml-4 px-3 py-1 bg-blue-700 hover:bg-blue-800 rounded-md text-sm">Keluar</button>
    </div>

    <!-- Halaman Login/Daftar -->
    <div id="authPage" class="flex-1 flex flex-col items-center justify-center p-4 bg-gray-100">
        <div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-md">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center" id="authTitle">Masuk</h2>

            <!-- Tampilan Pesan Kesalahan -->
            <div id="authError" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 hidden" role="alert">
                <span class="block sm:inline" id="authErrorMessage"></span>
            </div>

            <input type="email" id="emailInput" placeholder="Email"
                   class="w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800">
            <input type="password" id="passwordInput" placeholder="Kata Sandi"
                   class="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800">

            <button id="authSubmitBtn"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 mb-4">
                Masuk
            </button>
            <button id="toggleAuthBtn"
                    class="w-full text-blue-600 hover:text-blue-800 font-semibold py-2 rounded-lg transition duration-300 ease-in-out">
                Belum punya akun? Daftar
            </button>
        </div>
    </div>

    <!-- Kontainer Aplikasi Utama (Tersembunyi sampai terautentikasi) -->
    <div id="mainApp" class="flex-1 flex flex-col hidden">
        <!-- Bilah Navigasi Utama -->
        <nav class="bg-white p-4 shadow-lg flex justify-around items-center rounded-b-xl z-10">
            <button id="navForum" class="nav-btn flex flex-col items-center text-blue-600 relative">
                <i class="fas fa-comments text-2xl mb-1"></i>
                <span class="text-xs font-semibold">Forum</span>
                <span id="forumAdTimer" class="absolute top-0 right-0 bg-red-500 text-white text-xs px-1 rounded-full hidden"></span>
            </button>
            <button id="navPrivateChat" class="nav-btn flex flex-col items-center text-gray-500 relative">
                <i class="fas fa-user-friends text-2xl mb-1"></i>
                <span class="text-xs font-semibold">Obrolan Pribadi</span>
                <span id="privateChatRequestBadge" class="absolute top-0 right-0 bg-red-500 text-white text-xs px-1 rounded-full hidden">0</span>
            </button>
            <button id="navEkspor101" class="nav-btn flex flex-col items-center text-gray-500">
                <i class="fas fa-book text-2xl mb-1"></i>
                <span class="text-xs font-semibold">Ekspor 101</span>
            </button>
            <button id="navProfile" class="nav-btn flex flex-col items-center text-gray-500">
                <i class="fas fa-user-circle text-2xl mb-1"></i>
                <span class="text-xs font-semibold">Profil</span>
            </button>
            <button id="navDonate" class="nav-btn flex flex-col items-center text-gray-500">
                <i class="fas fa-hand-holding-usd text-2xl mb-1"></i>
                <span class="text-xs font-semibold">Donasi</span>
            </button>
        </nav>

        <!-- Area Konten Halaman -->
        <div class="flex-1 overflow-hidden p-4 pb-16"> <!-- Added pb-16 for banner ad space -->

            <!-- Halaman Forum -->
            <div id="forumPage" class="page-content flex flex-col h-full">
                <h2 class="text-3xl font-bold text-gray-800 mb-4 text-center">Forum Universal <span id="onlineCount" class="text-blue-500 text-xl">(0 Online)</span></h2>
                <div id="forumMessages" class="flex-1 overflow-y-auto bg-white p-4 rounded-xl shadow-lg mb-4 flex flex-col space-y-3 chat-messages">
                    <div class="text-center text-gray-500 text-sm italic">
                        Memuat pesan forum...
                    </div>
                </div>
                <form id="forumMessageForm" class="flex items-center bg-white p-3 rounded-xl shadow-lg">
                    <input type="text" id="forumMessageInput" placeholder="Ketik pesan Anda..."
                           class="flex-1 p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800">
                    <button type="submit"
                            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-r-lg transition duration-300 ease-in-out transform hover:scale-105 ml-2">
                        Kirim
                    </button>
                </form>
            </div>

            <!-- Halaman Ekspor 101 -->
            <div id="ekspor101Page" class="page-content hidden flex flex-col h-full bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-gray-800 mb-4 text-center">Ekspor 101 - Konten Edukasi</h2>
                <div class="text-center text-gray-600">
                    <p class="mb-4">Bagian ini akan menampilkan direktori kurasi artikel edukasi, video, dan sumber daya terkait ekspor dan perdagangan internasional.</p>
                    <p class="text-xl font-semibold text-blue-500">Segera Hadir!</p>
                    <img src="https://placehold.co/300x200/ADD8E6/000000?text=Konten+Edukasi" alt="Placeholder Konten Edukasi" class="mx-auto mt-6 rounded-lg shadow-md">
                </div>
            </div>

            <!-- Halaman Obrolan Pribadi -->
            <div id="privateChatPage" class="page-content hidden flex flex-col h-full">
                <h2 class="text-3xl font-bold text-gray-800 mb-4 text-center">Obrolan Pribadi</h2>

                <!-- Kotak Pesan Kustom untuk Batas Obrolan Pribadi -->
                <div id="privateChatMessageBox" class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative mb-4 hidden" role="alert">
                    <span class="block sm:inline" id="privateChatErrorMessage"></span>
                </div>

                <div class="flex-1 flex flex-col lg:flex-row gap-4">
                    <!-- Permintaan Obrolan Masuk -->
                    <div class="lg:w-1/2 bg-white p-4 rounded-xl shadow-lg overflow-y-auto mb-4 lg:mb-0">
                        <h3 class="text-xl font-semibold text-gray-700 mb-3">Permintaan Obrolan Masuk</h3>
                        <ul id="incomingRequestsList" class="space-y-2">
                            <li class="text-gray-500 text-sm italic">Tidak ada permintaan obrolan masuk.</li>
                        </ul>
                    </div>

                    <!-- Obrolan Pribadi Aktif / Tampilan Obrolan Terpilih -->
                    <div class="lg:w-1/2 flex flex-col bg-white p-4 rounded-xl shadow-lg">
                        <div id="activeChatsList" class="mb-4">
                            <h3 class="text-xl font-semibold text-gray-700 mb-3">Obrolan Pribadi Aktif Anda (<span id="activeChatCount">0</span>/3)</h3>
                            <div id="activeChatsContainer" class="flex flex-wrap gap-2">
                                <span class="text-gray-500 text-sm italic">Tidak ada obrolan aktif. Klik anggota untuk memulai!</span>
                            </div>
                        </div>

                        <div id="selectedPrivateChatView" class="flex-1 flex flex-col border border-gray-200 rounded-lg p-3 hidden">
                            <h3 class="text-xl font-semibold text-gray-700 mb-3">Obrolan dengan: <span id="privateChatRecipientName"></span></h3>
                            <div id="privateChatMessages" class="flex-1 overflow-y-auto bg-gray-50 p-3 rounded-lg mb-3 flex flex-col space-y-3 chat-messages">
                                <div class="text-center text-gray-500 text-sm italic">
                                    Pilih obrolan atau mulai yang baru.
                                </div>
                            </div>
                            <form id="privateMessageForm" class="flex items-center">
                                <input type="text" id="privateMessageInput" placeholder="Ketik pesan pribadi Anda..."
                                       class="flex-1 p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800">
                                <button type="submit"
                                        class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-r-lg transition duration-300 ease-in-out transform hover:scale-105 ml-2">
                                    Kirim
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Halaman Profil -->
            <div id="profilePage" class="page-content hidden flex flex-col h-full bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Profil Anda</h2>
                <div class="text-center mb-6">
                    <p class="text-lg text-gray-700 mb-2">Nama Pengguna: <span id="profileUsername" class="font-semibold text-blue-600">Memuat...</span></p>
                    <p class="text-lg text-gray-700 mb-2">ID Pengguna: <span id="profileUserId" class="font-semibold text-gray-600">Memuat...</span></p>
                    <p class="text-lg text-gray-700 mt-4">Statistik: <span class="font-semibold text-gray-500">Segera Hadir!</span></p>
                    <p class="text-sm text-gray-500 mt-2">Total Pesan Terkirim: <span id="profileMessageCount">0</span></p>
                </div>

                <!-- Perbarui Profil -->
                <div class="w-full max-w-md mx-auto bg-gray-50 p-6 rounded-xl shadow-md mb-6">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">Perbarui Profil</h3>
                    <input type="text" id="newUsernameInput" placeholder="Nama Pengguna Baru"
                           class="w-full p-3 mb-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800">
                    <button id="updateUsernameBtn"
                            class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">
                        Perbarui Nama Pengguna
                    </button>
                    <input type="password" id="newPasswordInput" placeholder="Kata Sandi Baru (min 6 karakter)"
                           class="w-full p-3 mt-4 mb-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800">
                    <button id="updatePasswordBtn"
                            class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">
                        Perbarui Kata Sandi
                    </button>
                    <div id="profileUpdateMessage" class="mt-3 text-sm text-center hidden"></div>
                </div>

                <!-- Cari Pengguna -->
                <div class="w-full max-w-md mx-auto bg-gray-50 p-6 rounded-xl shadow-md">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">Cari Pengguna</h3>
                    <input type="text" id="findUserInput" placeholder="Cari berdasarkan Nama Pengguna atau ID Pengguna"
                           class="w-full p-3 mb-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800">
                    <button id="findUserBtn"
                            class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">
                        Cari
                    </button>
                    <div id="findUserMessage" class="mt-3 text-sm text-center hidden"></div>
                    <div id="foundUserProfile" class="mt-4 p-4 bg-white rounded-lg shadow-inner hidden">
                        <h4 class="font-bold text-lg text-gray-800 mb-2">Profil Ditemukan:</h4>
                        <p class="text-gray-700">Nama Pengguna: <span id="foundUsername" class="font-semibold"></span></p>
                        <p class="text-gray-700">ID Pengguna: <span id="foundUserId" class="font-semibold"></span></p>
                        <button id="sendPmRequestBtn"
                                class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">
                            Kirim Permintaan Obrolan Pribadi
                        </button>
                        <div id="sendPmRequestMessage" class="mt-3 text-sm text-center hidden"></div>
                    </div>
                </div>
            </div>

            <!-- Halaman Donasi -->
            <div id="donatePage" class="page-content hidden flex flex-col items-center justify-center h-full bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Dukung Ekspor 101</h2>
                <p class="text-lg text-gray-700 mb-6 text-center max-w-prose">
                    Kontribusi Anda yang murah hati membantu kami memelihara dan meningkatkan aplikasi ini, membawa konten dan fitur yang lebih berharga bagi komunitas Ekspor 101. Setiap donasi, sekecil apa pun, membuat perbedaan besar!
                </p>
                <div class="bg-gray-100 p-6 rounded-lg shadow-md text-center">
                    <p class="text-xl font-semibold text-blue-600 mb-4">Pindai untuk Donasi:</p>
                    <!-- Placeholder for QR Code -->
                    <img src="https://placehold.co/200x200/28A745/FFFFFF?text=QR+Code+Disini" alt="QR Code Donasi" class="mx-auto rounded-lg shadow-md mb-4">
                    <p class="text-sm text-gray-500">Terima kasih atas dukungan Anda!</p>
                </div>
                <button id="contactSupportBtn"
                        class="mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">
                    Hubungi Dukungan
                </button>
            </div>

        </div>

        <!-- Static Banner Ad Placeholder -->
        <div id="bannerAd" class="fixed bottom-0 left-0 right-0 bg-gray-200 p-2 text-center text-sm shadow-lg z-20">
            <!-- Placeholder for your banner ad -->
            <img src="https://placehold.co/320x50/FFD700/000000?text=Banner+Iklan" alt="Banner Iklan" class="mx-auto w-full max-w-xs sm:max-w-md md:max-w-lg lg:max-w-xl">
        </div>
    </div>

    <!-- Link to your JavaScript file -->
    <script type="module" src="script.js"></script>
</body>
</html>
